This file is part of MXE. See LICENSE.md for licensing information.

Contains ad hoc patches for cross building.

From 0000000000000000000000000000000000000000 Mon Sep 17 00:00:00 2001
From: Jonas Kvinge <jonas@jkvinge.net>
Date: Sun, 6 Feb 2022 06:04:45 +0100
Subject: [PATCH 1/1] Remove try_run()


diff --git a/build/cmake/modules/JasGetStdcVersion.cmake b/build/cmake/modules/JasGetStdcVersion.cmake
index 1111111..2222222 100644
--- a/build/cmake/modules/JasGetStdcVersion.cmake
+++ b/build/cmake/modules/JasGetStdcVersion.cmake
@@ -6,17 +6,10 @@ function(jas_get_stdc_version status_out stdc_version_out)
 	set(source_dir ${CMAKE_SOURCE_DIR}/build/cmake/src)
 	set(bin_dir ${CMAKE_BINARY_DIR}/build/cmake/src)
 
-	try_run(print_stdc_run_status print_stdc_compile_status
-	    ${bin_dir}
-	    ${source_dir}/print_stdc.c
-	    COMPILE_OUTPUT_VARIABLE print_stdc_compile_output
-	    RUN_OUTPUT_VARIABLE stdc_version
-	)
-
 	# For testing.
 	#set(stdc_version "199901L") # C99
 	#set(stdc_version "201112L") # C11
-	#set(stdc_version "201710L") # C17
+	set(stdc_version "201710L") # C17
 
 	if(verbose)
 		message("print_stdc_run_status ${print_stdc_run_status}")
@@ -24,12 +17,7 @@ function(jas_get_stdc_version status_out stdc_version_out)
 		message("stdc_version ${stdc_version}")
 	endif()
 
-	if(print_stdc_compile_status AND NOT print_stdc_run_status)
-		set(status TRUE)
-	else()
-		set(status FALSE)
-		set(stdc_version "")
-	endif()
+        set(status TRUE)
 
 	if(verbose)
 		message("status ${status}")
